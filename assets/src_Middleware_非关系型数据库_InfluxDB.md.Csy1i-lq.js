import{_ as s,c as n,o as i,ag as e}from"./chunks/framework.DPDPlp3K.js";const b=JSON.parse('{"title":"InfluxDB","description":"","frontmatter":{},"headers":[],"relativePath":"src/Middleware/非关系型数据库/InfluxDB.md","filePath":"src/Middleware/非关系型数据库/InfluxDB.md","lastUpdated":1737139361000}'),l={name:"src/Middleware/非关系型数据库/InfluxDB.md"};function t(p,a,r,h,d,u){return i(),n("div",null,a[0]||(a[0]=[e(`<h1 id="influxdb" tabindex="-1">InfluxDB <a class="header-anchor" href="#influxdb" aria-label="Permalink to &quot;InfluxDB&quot;">​</a></h1><h2 id="influxdb-简介" tabindex="-1">InfluxDB 简介 <a class="header-anchor" href="#influxdb-简介" aria-label="Permalink to &quot;InfluxDB 简介&quot;">​</a></h2><p>InfluxDB 是一个开源的时序数据库，由 InfluxData 开发。它被设计用来处理大规模的时序数据，例如物联网设备的数据、网站性能数据等。InfluxDB 具有以下特点：</p><ul><li>高性能：InfluxDB 采用 Go 语言编写，具有高性能，能够处理大量的实时数据。</li><li>高可靠性：InfluxDB 采用分布式架构，数据存储在多个服务器上，保证数据安全和高可用性。</li><li>易扩展：InfluxDB 支持水平扩展，能够轻松应对数据量的增长。</li><li>灵活的数据模型：InfluxDB 支持多种数据模型，包括时间序列数据、事件数据、实时数据等。</li><li>易用性：InfluxDB 提供易用性的 Web 界面，用户可以直观地看到数据。</li></ul><h2 id="influxdb-安装" tabindex="-1">InfluxDB 安装 <a class="header-anchor" href="#influxdb-安装" aria-label="Permalink to &quot;InfluxDB 安装&quot;">​</a></h2><p>InfluxDB 可以在 Linux、macOS、Windows 等操作系统上安装。下面介绍如何在 Ubuntu 上安装 InfluxDB。</p><h3 id="下载-influxdb-安装包" tabindex="-1">下载 InfluxDB 安装包 <a class="header-anchor" href="#下载-influxdb-安装包" aria-label="Permalink to &quot;下载 InfluxDB 安装包&quot;">​</a></h3><p>首先，需要从 InfluxData 官网下载 InfluxDB 安装包。</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://dl.influxdata.com/influxdb/releases/influxdb_1.8.3_amd64.deb</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="安装-influxdb" tabindex="-1">安装 InfluxDB <a class="header-anchor" href="#安装-influxdb" aria-label="Permalink to &quot;安装 InfluxDB&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dpkg</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> influxdb_1.8.3_amd64.deb</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="启动-influxdb" tabindex="-1">启动 InfluxDB <a class="header-anchor" href="#启动-influxdb" aria-label="Permalink to &quot;启动 InfluxDB&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> influxdb</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="验证-influxdb-运行状态" tabindex="-1">验证 InfluxDB 运行状态 <a class="header-anchor" href="#验证-influxdb-运行状态" aria-label="Permalink to &quot;验证 InfluxDB 运行状态&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> influxdb</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>如果 InfluxDB 运行正常，会看到类似如下输出：</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>● influxdb.service - InfluxDB is an open-source, distributed, time series database</span></span>
<span class="line"><span>   Loaded: loaded (/lib/systemd/system/influxdb.service; enabled; vendor preset: enabled)</span></span>
<span class="line"><span>   Active: active (running) since Fri 2020-08-12 16:02:22 CST; 1min 3s ago</span></span>
<span class="line"><span>     Docs: https://docs.influxdata.com/influxdb/</span></span>
<span class="line"><span> Main PID: 1016 (influxd)</span></span>
<span class="line"><span>    Tasks: 10</span></span>
<span class="line"><span>   CGroup: /system.slice/influxdb.service</span></span>
<span class="line"><span>           └─1016 /usr/bin/influxd -config /etc/influxdb/influxdb.conf</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Aug 12 16:02:22 jay-ThinkPad-X1-Carbon-6th influxd[1016]: [I] 2020-08-12T08:02:22Z InfluxDB starting, version 1.8.3, branch 1.8, commit 7e7753e1f5</span></span>
<span class="line"><span>Aug 12 16:02:22 jay-ThinkPad-X1-Carbon-6th influxd[1016]: [I] 2020-08-12T08:02:22Z Go version go1.13.4, GOMAXPROCS set to 4</span></span>
<span class="line"><span>Aug 12 16:02:22 jay-ThinkPad-X1-Carbon-6th influxd[1016]: [I] 2020-08-12T08:02:22Z Using configuration at: /etc/influxdb/influxdb.conf</span></span>
<span class="line"><span>Aug 12 16:02:22 jay-ThinkPad-X1-Carbon-6th influxd[1016]: [I] 2020-08-12T08:02:22Z Starting InfluxDB</span></span>
<span class="line"><span>Aug 12 16:02:22 jay-ThinkPad-X1-Carbon-6th influxd[1016]: [I] 2020-08-12T08:02:22Z Starting precreation service with check interval of 10m0s, 10m0s</span></span>
<span class="line"><span>Aug 12 16:02:22 jay-ThinkPad-X1-Carbon-6th influxd[1016]: [I] 2020-08-12T08:02:22Z Starting snapshot service</span></span>
<span class="line"><span>Aug 12 16:02:22 jay-ThinkPad-X1-Carbon-6th influxd[1016]: [I] 2020-08-12T08:02:22Z Starting continuous query service</span></span>
<span class="line"><span>Aug 12 16:02:22 jay-ThinkPad-X1-Carbon-6th influxd[1016]: [I] 2020-08-12T08:02:22Z Starting HTTP service</span></span>
<span class="line"><span>Aug 12 16:02:22 jay-ThinkPad-X1-Carbon-6th influxd[1016]: [I] 2020-08-12T08:02:22Z Authentication enabled: false</span></span>
<span class="line"><span>Aug 12 16:02:22 jay-ThinkPad-X1-Carbon-6th influxd[1016]: [I] 2020-08-12T08:02:22Z Listening on HTTP:[::]:8086</span></span>
<span class="line"><span>Aug 12 16:02:22 jay-ThinkPad-X1-Carbon-6th influxd[1016]: [I] 2020-08-12T08:02:22Z Starting retention policy enforcement service</span></span>
<span class="line"><span>Aug 12 16:02:22 jay-ThinkPad-X1-Carbon-6th influxd[1016]: [I] 2020-08-12T08:02:22Z Starting admin service</span></span>
<span class="line"><span>Aug 12 16:02:22 jay-ThinkPad-X1-Carbon-6th influxd[1016]: [I] 2020-08-12T08:02:22Z Starting hinted handoff service</span></span>
<span class="line"><span>Aug 12 16:02:22 jay-ThinkPad-X1-Carbon-6th influxd[1016]: [I] 2020-08-12T08:02:22Z Listening on UDP:127.0.0.1:8089</span></span>
<span class="line"><span>Aug 12 16:02:22 jay-ThinkPad-X1-Carbon-6th influxd[1016]: [I] 2020-08-12T08:02:22Z Enabling subscriptions</span></span>
<span class="line"><span>Aug 12 16:02:22 jay-ThinkPad-X1-Carbon-6th influxd[1016]: [I] 2020-08-12T08:02:22Z Starting subscriber service</span></span>
<span class="line"><span>Aug 12 16:02:22 jay-ThinkPad-X1-Carbon-6th influxd[1016]: [I] 2020-08-12T08:02:22Z Starting graphite service</span></span>
<span class="line"><span>Aug 12 16:02:22 jay-ThinkPad-X1-Carbon-6th influxd[1016]: [I] 2020-08-12T08:02:22Z Starting collectd service</span></span>
<span class="line"><span>Aug 12 16:02:22 jay-ThinkPad-X1-Carbon-6th influxd[1016]: [I] 2020-08-12T08:02:22Z Starting opentsdb service</span></span>
<span class="line"><span>Aug 12 16:02:22 jay-ThinkPad-X1-Carbon-6th influxd[1016]: [I] 2020-08-12T08:02:22Z Starting UDP service</span></span>
<span class="line"><span>Aug 12 16:02:22 jay-ThinkPad-X1-Carbon-6th influxd[1016]: [I] 2020-08-12T08:02:22Z Starting continuous query scheduler service</span></span>
<span class="line"><span>Aug 12 16:02:22 jay-ThinkPad-X1-Carbon-6th influxd[1016]: [I] 2020-08-12T08:02:22Z Starting admin interface service</span></span>
<span class="line"><span>Aug 12 16:02:22 jay-ThinkPad-X1-Carbon-6th influxd[1016]: [I] 2020-08-12T08:02:22Z Starting HTTP API service</span></span>
<span class="line"><span>Aug 12 16:02:22 jay-ThinkPad-X1-Carbon-6th influxd[1016]: [I] 2020-08-12T08:02:22Z Starting backup service</span></span>
<span class="line"><span>Aug 12 16:02:22 jay-ThinkPad-X1-Carbon-6th influxd[1016]: [I] 2020-08-12T08:02:22Z Starting continuous query service</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h2 id="influxdb-基本操作" tabindex="-1">InfluxDB 基本操作 <a class="header-anchor" href="#influxdb-基本操作" aria-label="Permalink to &quot;InfluxDB 基本操作&quot;">​</a></h2><h3 id="创建数据库" tabindex="-1">创建数据库 <a class="header-anchor" href="#创建数据库" aria-label="Permalink to &quot;创建数据库&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">influx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -execute</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;CREATE DATABASE mydb&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="切换数据库" tabindex="-1">切换数据库 <a class="header-anchor" href="#切换数据库" aria-label="Permalink to &quot;切换数据库&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">influx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -execute</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;USE mydb&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="插入数据" tabindex="-1">插入数据 <a class="header-anchor" href="#插入数据" aria-label="Permalink to &quot;插入数据&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">influx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -execute</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;INSERT cpu_load_short,host=server01,region=us-west value=0.64&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="查询数据" tabindex="-1">查询数据 <a class="header-anchor" href="#查询数据" aria-label="Permalink to &quot;查询数据&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">influx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -execute</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;SELECT * FROM cpu_load_short&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="删除数据" tabindex="-1">删除数据 <a class="header-anchor" href="#删除数据" aria-label="Permalink to &quot;删除数据&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">influx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -execute</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;DELETE FROM cpu_load_short WHERE host=&#39;server01&#39; AND region=&#39;us-west&#39;&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="管理用户" tabindex="-1">管理用户 <a class="header-anchor" href="#管理用户" aria-label="Permalink to &quot;管理用户&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">influx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -execute</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;CREATE USER jay WITH PASSWORD &#39;password&#39;&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">influx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -execute</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;GRANT ALL PRIVILEGES ON mydb TO jay&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="管理权限" tabindex="-1">管理权限 <a class="header-anchor" href="#管理权限" aria-label="Permalink to &quot;管理权限&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">influx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -execute</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;GRANT READ ON mydb TO jay&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">influx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -execute</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;REVOKE READ ON mydb FROM jay&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="influxdb-高级操作" tabindex="-1">InfluxDB 高级操作 <a class="header-anchor" href="#influxdb-高级操作" aria-label="Permalink to &quot;InfluxDB 高级操作&quot;">​</a></h2><h3 id="连续查询" tabindex="-1">连续查询 <a class="header-anchor" href="#连续查询" aria-label="Permalink to &quot;连续查询&quot;">​</a></h3><p>InfluxDB 支持连续查询，可以定期执行指定的查询语句，并将结果写入到指定的时间序列数据库中。</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">influx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -execute</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;CREATE CONTINUOUS QUERY cq_cpu_load_short ON mydb BEGIN SELECT mean(value) AS mean_value INTO mydb.autogen.cpu_load_short_mean FROM mydb.autogen.cpu_load_short GROUP BY time(1m), host END&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="备份和恢复" tabindex="-1">备份和恢复 <a class="header-anchor" href="#备份和恢复" aria-label="Permalink to &quot;备份和恢复&quot;">​</a></h3><p>InfluxDB 支持备份和恢复，可以将 InfluxDB 的数据备份到本地或远程服务器，也可以从备份文件中恢复数据。</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">influxd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> backup</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -portable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /path/to/backup/file</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">influxd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restore</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -portable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /path/to/backup/file</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="监控和管理" tabindex="-1">监控和管理 <a class="header-anchor" href="#监控和管理" aria-label="Permalink to &quot;监控和管理&quot;">​</a></h3><p>InfluxDB 提供了丰富的监控和管理功能，包括数据备份、查询统计、日志查看、配置管理等。</p><h2 id="参考资料" tabindex="-1">参考资料 <a class="header-anchor" href="#参考资料" aria-label="Permalink to &quot;参考资料&quot;">​</a></h2><ul><li><a href="https://www.influxdata.com/" target="_blank" rel="noreferrer">InfluxDB 官网</a></li><li><a href="https://docs.influxdata.com/influxdb/" target="_blank" rel="noreferrer">InfluxDB 文档</a></li><li><a href="https://docs.influxdata.com/influxdb/v1.8/introduction/installation/" target="_blank" rel="noreferrer">InfluxDB 安装</a></li><li><a href="https://docs.influxdata.com/influxdb/v1.8/query_language/getting_started/" target="_blank" rel="noreferrer">InfluxDB 基本操作</a></li><li><a href="https://docs.influxdata.com/influxdb/v1.8/query_language/continuous_queries/" target="_blank" rel="noreferrer">InfluxDB 高级操作</a></li></ul>`,43)]))}const o=s(l,[["render",t]]);export{b as __pageData,o as default};
