import{_ as a,c as n,o as e,ag as l}from"./chunks/framework.DPDPlp3K.js";const h=JSON.parse('{"title":"ELK Stack Base","description":"","frontmatter":{},"headers":[],"relativePath":"src/Middleware/ELK/elk-base.md","filePath":"src/Middleware/ELK/elk-base.md","lastUpdated":1737139361000}'),p={name:"src/Middleware/ELK/elk-base.md"};function i(t,s,r,c,o,u){return e(),n("div",null,s[0]||(s[0]=[l(`<h1 id="elk-stack-base" tabindex="-1">ELK Stack Base <a class="header-anchor" href="#elk-stack-base" aria-label="Permalink to &quot;ELK Stack Base&quot;">​</a></h1><h2 id="elk-包括以下组件" tabindex="-1">ELk 包括以下组件： <a class="header-anchor" href="#elk-包括以下组件" aria-label="Permalink to &quot;ELk 包括以下组件：&quot;">​</a></h2><ul><li>Elasticsearch：用于存储、索引和搜索数据</li><li>Logstash：用于收集、过滤和传输数据</li><li>Kibana：用于可视化和分析数据</li></ul><h2 id="安装-elk-栈" tabindex="-1">安装 ELK 栈 <a class="header-anchor" href="#安装-elk-栈" aria-label="Permalink to &quot;安装 ELK 栈&quot;">​</a></h2><h3 id="安装-elasticsearch" tabindex="-1">安装 Elasticsearch <a class="header-anchor" href="#安装-elasticsearch" aria-label="Permalink to &quot;安装 Elasticsearch&quot;">​</a></h3><p>Elasticsearch 可以通过 Docker 进行安装，具体安装步骤如下：</p><ol><li>安装 Docker</li><li>启动 Elasticsearch 容器：</li></ol><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>docker run -d --name elasticsearch -p 9200:9200 -p 9300:9300 -e &quot;discovery.type=single-node&quot; elasticsearch:7.10.2</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="安装-logstash" tabindex="-1">安装 Logstash <a class="header-anchor" href="#安装-logstash" aria-label="Permalink to &quot;安装 Logstash&quot;">​</a></h3><p>Logstash 可以通过 Docker 进行安装，具体安装步骤如下：</p><ol><li>安装 Docker</li><li>启动 Logstash 容器：</li></ol><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>docker run -d --name logstash -p 5044:5044 -p 9600:9600 -v /path/to/logstash/config:/usr/share/logstash/config -v /path/to/logstash/pipeline:/usr/share/logstash/pipeline/ -e &quot;xpack.monitoring.elasticsearch.hosts=[\\&quot;http://elasticsearch:9200\\&quot;]&quot; logstash:7.10.2</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="3"><li>配置 Logstash：</li></ol><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>input {</span></span>
<span class="line"><span>  tcp {</span></span>
<span class="line"><span>    port =&gt; 5044</span></span>
<span class="line"><span>    codec =&gt; json_lines</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>output {</span></span>
<span class="line"><span>  elasticsearch {</span></span>
<span class="line"><span>    hosts =&gt; [&quot;http://elasticsearch:9200&quot;]</span></span>
<span class="line"><span>    index =&gt; &quot;logstash-%{+YYYY.MM.dd}&quot;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ol start="4"><li>启动 Logstash：</li></ol><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>docker exec -it logstash /usr/share/logstash/bin/logstash -f /usr/share/logstash/config/logstash.conf</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="安装-kibana" tabindex="-1">安装 Kibana <a class="header-anchor" href="#安装-kibana" aria-label="Permalink to &quot;安装 Kibana&quot;">​</a></h3><p>Kibana 可以通过 Docker 进行安装，具体安装步骤如下：</p><ol><li>安装 Docker</li><li>启动 Kibana 容器：</li></ol><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>docker run -d --name kibana -p 5601:5601 -e &quot;ELASTICSEARCH_HOSTS=http://elasticsearch:9200&quot; kibana:7.10.2</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="配置-elk-栈" tabindex="-1">配置 ELK 栈 <a class="header-anchor" href="#配置-elk-栈" aria-label="Permalink to &quot;配置 ELK 栈&quot;">​</a></h2><h3 id="配置-elasticsearch" tabindex="-1">配置 Elasticsearch <a class="header-anchor" href="#配置-elasticsearch" aria-label="Permalink to &quot;配置 Elasticsearch&quot;">​</a></h3><p>Elasticsearch 的配置主要包括：</p><ol><li>设置集群名称：</li></ol><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>PUT _cluster/settings</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  &quot;persistent&quot;: {</span></span>
<span class="line"><span>    &quot;cluster.name&quot;: &quot;my-cluster-name&quot;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol start="2"><li>设置索引模板：</li></ol><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>PUT _template/my-template</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  &quot;index_patterns&quot;: [&quot;my-index-*&quot;],</span></span>
<span class="line"><span>  &quot;settings&quot;: {</span></span>
<span class="line"><span>    &quot;number_of_shards&quot;: 1,</span></span>
<span class="line"><span>    &quot;number_of_replicas&quot;: 0</span></span>
<span class="line"><span>  },</span></span>
<span class="line"><span>  &quot;mappings&quot;: {</span></span>
<span class="line"><span>    &quot;properties&quot;: {</span></span>
<span class="line"><span>      &quot;message&quot;: {</span></span>
<span class="line"><span>        &quot;type&quot;: &quot;text&quot;</span></span>
<span class="line"><span>      },</span></span>
<span class="line"><span>      &quot;host&quot;: {</span></span>
<span class="line"><span>        &quot;type&quot;: &quot;keyword&quot;</span></span>
<span class="line"><span>      },</span></span>
<span class="line"><span>      &quot;timestamp&quot;: {</span></span>
<span class="line"><span>        &quot;type&quot;: &quot;date&quot;,</span></span>
<span class="line"><span>        &quot;format&quot;: &quot;yyyy-MM-dd HH:mm:ss&quot;</span></span>
<span class="line"><span>      }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="配置-logstash" tabindex="-1">配置 Logstash <a class="header-anchor" href="#配置-logstash" aria-label="Permalink to &quot;配置 Logstash&quot;">​</a></h3><p>Logstash 的配置主要包括：</p><ol><li>配置输入插件：</li></ol><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>input {</span></span>
<span class="line"><span>  tcp {</span></span>
<span class="line"><span>    port =&gt; 5044</span></span>
<span class="line"><span>    codec =&gt; json_lines</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol start="2"><li>配置过滤插件：</li></ol><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>filter {</span></span>
<span class="line"><span>  if [type] == &quot;my-type&quot; {</span></span>
<span class="line"><span>    mutate {</span></span>
<span class="line"><span>      remove_field =&gt; [&quot;field1&quot;, &quot;field2&quot;]</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="3"><li>配置输出插件：</li></ol><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>output {</span></span>
<span class="line"><span>  elasticsearch {</span></span>
<span class="line"><span>    hosts =&gt; [&quot;http://elasticsearch:9200&quot;]</span></span>
<span class="line"><span>    index =&gt; &quot;my-index&quot;</span></span>
<span class="line"><span>    document_type =&gt; &quot;my-type&quot;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="4"><li>配置 Logstash 管道：</li></ol><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>input {</span></span>
<span class="line"><span>  tcp {</span></span>
<span class="line"><span>    port =&gt; 5044</span></span>
<span class="line"><span>    codec =&gt; json_lines</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>filter {</span></span>
<span class="line"><span>  if [type] == &quot;my-type&quot; {</span></span>
<span class="line"><span>    mutate {</span></span>
<span class="line"><span>      remove_field =&gt; [&quot;field1&quot;, &quot;field2&quot;]</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>output {</span></span>
<span class="line"><span>  elasticsearch {</span></span>
<span class="line"><span>    hosts =&gt; [&quot;http://elasticsearch:9200&quot;]</span></span>
<span class="line"><span>    index =&gt; &quot;my-index&quot;</span></span>
<span class="line"><span>    document_type =&gt; &quot;my-type&quot;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><ol start="5"><li>启动 Logstash：</li></ol><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>docker exec -it logstash /usr/share/logstash/bin/logstash -f /usr/share/logstash/config/logstash.conf</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="配置-kibana" tabindex="-1">配置 Kibana <a class="header-anchor" href="#配置-kibana" aria-label="Permalink to &quot;配置 Kibana&quot;">​</a></h3><p>Kibana 的配置主要包括：</p><ol><li>配置 Elasticsearch 地址：</li></ol><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>PUT _cluster/settings</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  &quot;persistent&quot;: {</span></span>
<span class="line"><span>    &quot;kibana.index&quot;: &quot;my-index&quot;,</span></span>
<span class="line"><span>    &quot;kibana.defaultAppId&quot;: &quot;discover&quot;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="2"><li>配置仪表盘：</li></ol><ul><li>导入仪表盘：点击左侧导航栏中的「Dashboard」，然后点击「Import」按钮，选择要导入的仪表盘 JSON 文件。</li><li>新建仪表盘：点击左侧导航栏中的「Dashboard」，然后点击「Create」按钮，选择仪表盘模板，输入仪表盘名称，然后编辑仪表盘内容。</li></ul><h2 id="参考" tabindex="-1">参考 <a class="header-anchor" href="#参考" aria-label="Permalink to &quot;参考&quot;">​</a></h2><ul><li><a href="https://www.cnblogs.com/liu-yao/p/11299992.html" target="_blank" rel="noreferrer">ELK Stack 入门教程</a></li><li><a href="https://www.cnblogs.com/liu-yao/p/11300012.html" target="_blank" rel="noreferrer">ELK Stack 实战</a></li><li><a href="https://www.cnblogs.com/liu-yao/p/11300032.html" target="_blank" rel="noreferrer">ELK Stack 基础知识</a></li><li><a href="https://www.cnblogs.com/liu-yao/p/11300052.html" target="_blank" rel="noreferrer">ELK Stack 日志分析</a></li><li><a href="https://www.cnblogs.com/liu-yao/p/11300072.html" target="_blank" rel="noreferrer">ELK Stack 安全与权限管理</a></li><li><a href="https://www.cnblogs.com/liu-yao/p/11300092.html" target="_blank" rel="noreferrer">ELK Stack 性能调优</a></li><li><a href="https://www.cnblogs.com/liu-yao/p/11300112.html" target="_blank" rel="noreferrer">ELK Stack 常见问题</a></li><li><a href="https://www.cnblogs.com/liu-yao/p/11300132.html" target="_blank" rel="noreferrer">ELK Stack 日志清洗</a></li><li><a href="https://www.cnblogs.com/liu-yao/p/11300152.html" target="_blank" rel="noreferrer">ELK Stack 日志聚合</a></li><li><a href="https://www.cnblogs.com/liu-yao/p/11300172.html" target="_blank" rel="noreferrer">ELK Stack 日志告警</a></li><li><a href="https://www.cnblogs.com/liu-yao/p/11300192.html" target="_blank" rel="noreferrer">ELK Stack 日志分析平台搭建</a></li><li><a href="https://www.cnblogs.com/liu-yao/p/11300212.html" target="_blank" rel="noreferrer">ELK Stack 日志分析平台使用</a></li><li><a href="https://www.cnblogs.com/liu-yao/p/11300232.html" target="_blank" rel="noreferrer">ELK Stack 日志分析平台优化</a></li><li><a href="https://www.cnblogs.com/liu-yao/p/11300252.html" target="_blank" rel="noreferrer">ELK Stack 日志分析平台安全</a></li><li><a href="https://www.cnblogs.com/liu-yao/p/11300272.html" target="_blank" rel="noreferrer">ELK Stack 日志分析平台监控</a></li><li><a href="https://www.cnblogs.com/liu-yao/p/11300292.html" target="_blank" rel="noreferrer">ELK Stack 日志分析平台架构</a></li><li><a href="https://www.cnblogs.com/liu-yao/p/11300312.html" target="_blank" rel="noreferrer">ELK Stack 日志分析平台部署</a></li></ul>`,47)]))}const d=a(p,[["render",i]]);export{h as __pageData,d as default};
